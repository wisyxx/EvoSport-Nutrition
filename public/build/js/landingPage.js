import{fetchAPI}from"./app.js";async function startApp(){startImageRotation(await loadAdImages()),await loadPopularProducts(),popularProductsSlider()}async function getAdImages(){const t=await fetchAPI("http://localhost:3000/api/ad-images");let e=[];return 0!==e.length||t.forEach(t=>{const{name:a}=t;e=[...e,a]}),e}async function loadAdImages(){const t=await getAdImages(),e=document.querySelector(".ads-container");let a=[];return t.forEach((t,c)=>{const s=document.createElement("DIV");s.classList.add("slide-image"),s.style.backgroundImage=`url('../build/img/ads/${t}')`,e.appendChild(s),a.push(s),0===c&&s.classList.add("active")}),a}function startImageRotation(t){let e=0;setInterval(()=>{t[e].classList.remove("active"),e+=1,e>=t.length&&(e=0),t[e].classList.add("active")},6e3)}async function loadPopularProducts(){const t=await fetchAPI("http://localhost:3000/api/popular-products"),e=document.querySelector(".popular-products-slider");t.forEach(t=>{const{id:a,name:c,price:s,image:o}=t,i=document.createElement("A");i.setAttribute("href","/product?id="+a),i.classList.add("product-container");const d=document.createElement("P");d.classList.add("product-name"),d.textContent=c;const r=document.createElement("P");r.classList.add("product-price"),r.textContent=s+"â‚¬";const l=document.createElement("IMG");l.classList.add("product-image"),l.setAttribute("src","build/img/products/"+o),i.append(l,d,r),e.appendChild(i)})}function popularProductsSlider(){const t=document.querySelector("#arrow-left"),e=document.querySelector("#arrow-right"),a=document.querySelector(".popular-products-slider"),c=a.scrollWidth-a.clientWidth;let s=a.scrollLeft;e.addEventListener("click",()=>{s+=255.75,s>=c&&(s=c),a.scrollLeft=s}),t.addEventListener("click",()=>{s-=255.75,s<=0&&(s=0),a.scrollLeft=s}),a.addEventListener("scroll",()=>{const s=Math.ceil(a.scrollLeft);s>=c?e.style.visibility="hidden":s<c&&(e.style.visibility="visible"),0===s?t.style.visibility="hidden":s>0&&(t.style.visibility="visible")})}document.addEventListener("DOMContentLoaded",()=>{startApp()});