import{fetchAPI}from"./app.js";async function startApp(){await loadProducts()}async function loadProducts(t=1){const e=await fetchAPI(`${location.origin}/api/products?page=${t}`),{products:n,productsCount:c}=e,o=document.querySelector(".products");o.innerHTML="",n.forEach(t=>{const{id:e,name:n,price:c,image:a}=t,d=document.createElement("a");d.setAttribute("href","/product?id="+e),d.classList.add("product-container");const i=document.createElement("p");i.classList.add("product-name"),i.textContent=n;const r=document.createElement("p");r.classList.add("product-price"),r.textContent=c+"â‚¬";const s=document.createElement("img");s.classList.add("product-image"),s.setAttribute("src","build/img/products/"+a),d.append(s,i,r),o.appendChild(d)}),pagination(c,t)}function pagination(t,e){let n=[];const c=t;if(!document.querySelector(".pagination")){const t=document.createElement("DIV");t.classList.add("pagination"),document.querySelector(".search").appendChild(t)}const o=Math.ceil(c/10),a=document.querySelector(".pagination");if(e<o&&e!==o-1&&e!==o-2){a.innerHTML="";for(let t=e;t<=e+3;t++){if(t>o)return;{n.push(t);const c=document.createElement("button");c.classList.add("pagination__button"),c.textContent=t,c.addEventListener("click",c=>{parseInt(c.target.innerHTML)===n[0]?loadProducts(e<4?1:n[0]-3):loadProducts(t)}),a.append(c)}}}}document.addEventListener("DOMContentLoaded",()=>{startApp()});