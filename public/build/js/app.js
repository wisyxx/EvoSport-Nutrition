async function startApp(){startImageRotation(await loadAdImages()),await loadPopularProducts(),popularProductsSlider(),await loadProducts()}async function fetchAPI(t){try{const e=await fetch(t);return await e.json()}catch(t){console.log(t)}}document.addEventListener("DOMContentLoaded",()=>{startApp()});const menu=document.querySelector(".menu");function menuAnimation(){document.querySelectorAll(".menu > div").forEach(t=>{t.classList.toggle("active"),t.classList.remove("not-active")}),dropDownMenu()}function dropDownMenu(){document.querySelector(".drop-menu").classList.toggle("hidden")}async function getAdImages(){const t=await fetchAPI("http://localhost:3000/api/ad-images");let e=[];return 0!==e.length||t.forEach(t=>{const{name:c}=t;e=[...e,c]}),e}async function loadAdImages(){const t=await getAdImages(),e=document.querySelector(".ads-container");if(!e)return;let c=[];return t.forEach((t,n)=>{const o=document.createElement("DIV");o.classList.add("slide-image"),o.style.backgroundImage=`url('../build/img/ads/${t}')`,e.appendChild(o),c.push(o),0===n&&o.classList.add("active")}),c}function startImageRotation(t){if(void 0===t)return;let e=0;setInterval(()=>{t[e].classList.remove("active"),e+=1,e>=t.length&&(e=0),t[e].classList.add("active")},6e3)}async function loadPopularProducts(){const t=await fetchAPI("http://localhost:3000/api/popular-products"),e=document.querySelector(".popular-products-slider");e&&t.forEach(t=>{const{id:c,name:n,price:o,image:a}=t,s=document.createElement("A");s.setAttribute("href","/product?id="+c),s.classList.add("product-container");const i=document.createElement("P");i.classList.add("product-name"),i.textContent=n;const d=document.createElement("P");d.classList.add("product-price"),d.textContent=o+"€";const r=document.createElement("IMG");r.classList.add("product-image"),r.setAttribute("src","build/img/products/"+a),s.append(r,i,d),e.appendChild(s)})}function popularProductsSlider(){const t=document.querySelector("#arrow-left"),e=document.querySelector("#arrow-right"),c=document.querySelector(".popular-products-slider");if(!c)return;const n=c.scrollWidth-c.clientWidth;let o=c.scrollLeft;e.addEventListener("click",()=>{o+=255.75,o>=n&&(o=n),c.scrollLeft=o}),t.addEventListener("click",()=>{o-=255.75,o<=0&&(o=0),c.scrollLeft=o}),c.addEventListener("scroll",()=>{const o=Math.ceil(c.scrollLeft);o>=n?e.style.visibility="hidden":o<n&&(e.style.visibility="visible"),0===o?t.style.visibility="hidden":o>0&&(t.style.visibility="visible")})}async function loadProducts(){const t=await fetchAPI("http://localhost:3000/api/products"),e=document.querySelector(".products");e&&t.forEach(t=>{const{id:c,name:n,price:o,image:a}=t,s=document.createElement("A");s.setAttribute("href","/product?id="+c),s.classList.add("product-container");const i=document.createElement("P");i.classList.add("product-name"),i.textContent=n;const d=document.createElement("P");d.classList.add("product-price"),d.textContent=o+"€";const r=document.createElement("IMG");r.classList.add("product-image"),r.setAttribute("src","build/img/products/"+a),s.append(r,i,d),e.appendChild(s)})}menu.addEventListener("click",()=>menuAnimation());